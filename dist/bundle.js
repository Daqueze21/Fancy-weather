!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){},function(t,e,o){"use strict";o.r(e);class n{constructor(){this.key="dca4e1911e3c08",this.url="https://ipinfo.io/json?token="}async getUserGeolocation(){const t=await fetch(`${this.url}${this.key}`);return(await t.json()).city}}class r{constructor(){this.key="9840e44de32341028d4fa0189698d503",this.url="https://api.opencagedata.com/geocode/v1/json?q="}async getCityInfo(t,e){const o=await fetch(`${this.url}${t}&key=${this.key}&language=${e}&pretty=1&no_annotations=1`);return await o.json()}}class a{constructor(t,e,o){this.key="cb2447744a3a4e01b1d104d6581812cf",this.url="https://api.weatherbit.io/v2.0/forecast/daily?city=",this.city=t,this.lang=e,this.countryCode=o}async getWeatherData(){const t=await fetch(`${this.url}${this.city}&country=${this.countryCode}&days=4&units=M&lang=${this.lang}&key=${this.key}`);return await t.json()}}class s{constructor(){this.key="pk.eyJ1IjoiZGFxdWV6ZTIxIiwiYSI6ImNrYXp4YzgxcTAwc2QycnFsaWRtZmtidmgifQ.EGgcHrEkAXOKvAmb3FWwtw"}async renderMap(t,e){mapboxgl.accessToken=this.key;new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[t,e],zoom:8})}}class c{constructor(){this.temperatureDegree=document.querySelector(".weather-today_temperature"),this.celsiumBtn=document.querySelector(".temp__celsBtn"),this.city=document.querySelector(".city-name"),this.currentDate=document.querySelector(".current-date"),this.weatherIcon=document.querySelector(".weather-icon"),this.summary=document.querySelector(".summary"),this.windSpeed=document.querySelector(".wind-speed"),this.tempApparent=document.querySelector(".temp-apparent"),this.humidity=document.querySelector(".humidity"),this.forecastDay=document.querySelectorAll(".forecast-day"),this.forecastTemp=document.querySelectorAll(".forecast-temp"),this.forecastIcon=document.querySelectorAll(".forecast-icon"),this.searchButton=document.querySelector(".search-button"),this.latitude=document.querySelector(".latitude"),this.longitude=document.querySelector(".longitude"),this.weatherIconUrl="https://www.weatherbit.io/static/img/icons/"}async renderWeather(t,e){console.log("render weather",t);const o=new Date;this.currentDate.textContent=`${o.getDayName()}  ${o.getDate()}  ${o.getMonthName()} ${o.toLocaleTimeString("en-US",{hour12:!1})}`,localStorage.setItem("today",Math.round(t[0].temp)),this.temperatureDegree.textContent=(this.celsiumBtn.classList.contains("temp-button_clicked")?localStorage.getItem("today"):Math.floor(9*localStorage.getItem("today")/5+32))+"°",this.summary.textContent=t[0].weather.description,this.weatherIcon.src=`${this.weatherIconUrl}${t[0].weather.icon}.png`,[...this.forecastTemp].forEach((e,o)=>{localStorage.setItem("day"+o,Math.round(t[o+1].temp)),e.textContent=(this.celsiumBtn.classList.contains("temp-button_clicked")?localStorage.getItem("day"+o):Math.floor(9*localStorage.getItem("day"+o)/5+32))+"°"}),[...this.forecastIcon].forEach((e,o)=>{e.src=`${this.weatherIconUrl}${t[o+1].weather.icon}.png`}),[...this.forecastDay].forEach((t,e)=>{const n=new Date(o.getTime()+864e5*(e+1));t.textContent=""+n.getDayName()}),"be"===e?(this.windSpeed.textContent=`Вецер: ${Math.round(t[0].wind_spd)} m/s`,this.tempApparent.textContent=`Ціск: ${Math.round(t[0].pres/1.33322387415)} мм`,this.humidity.textContent=`Вільготнасць: ${t[0].rh}%`):"ru"===e?(this.windSpeed.textContent=`Ветер: ${Math.round(t[0].wind_spd)} m/s`,this.tempApparent.textContent=`Давление: ${Math.round(t[0].pres/1.33322387415)} мм`,this.humidity.textContent=`Влажность: ${t[0].rh}%`):(this.windSpeed.textContent=`Wind speed: ${Math.round(t[0].wind_spd)} m/s`,this.tempApparent.textContent=`Pressure: ${Math.round(t[0].pres/1.33322387415)} mm`,this.humidity.textContent=`Humidity: ${t[0].rh}%`)}async renderCityData(t,e){const o=t.formatted.split(",");o.length>2&&o.splice(1,1);const n=`${t.geometry.lat.toString().slice(0,2)}° ${t.geometry.lat.toString().slice(3,5)}`,r=`${t.geometry.lng.toString().slice(0,2)}° ${t.geometry.lng.toString().slice(3,5)}`;this.city.textContent=""+o.join(","),"be"===e?(this.searchButton.textContent="ШУКАЦЬ",this.latitude.textContent="Шырата: "+n,this.longitude.textContent="Даугата: "+r,console.log("ctInfo",t)):"ru"===e?(this.searchButton.textContent="ИСКАТЬ",this.latitude.textContent="Широта: "+n,this.longitude.textContent="Доглота: "+r):(this.searchButton.textContent="SEARCH",this.latitude.textContent="Latitude: "+n,this.longitude.textContent="Longitude: "+r)}}o(0);window.addEventListener("load",()=>{(new n).getUserGeolocation().then(t=>{console.log("geoloc",t);(new r).getCityInfo(t,i.value.toLowerCase()).then(e=>{const o=new c;o.renderCityData(e.results[0],i.value.toLowerCase());new a(t,i.value.toLowerCase(),e.results[0].components.country_code.toUpperCase()).getWeatherData().then(t=>{o.renderWeather(t.data,i.value.toLowerCase())}).catch(t=>console.log("wheatherData",t));(new s).renderMap(e.results[0].geometry.lng,e.results[0].geometry.lat)}).catch(t=>console.log("cityinfo",t)),localStorage.setItem("userCity",t)}).catch(t=>console.log("geolocation",t))});const i=document.querySelector(".language select");i.addEventListener("change",()=>{(new r).getCityInfo(""===p.value?localStorage.getItem("userCity"):p.value,i.value.toLowerCase()).then(t=>{const e=new c;e.renderCityData(t.results[0],i.value.toLowerCase());new a(""===p.value?localStorage.getItem("userCity"):p.value,i.value.toLowerCase(),t.results[0].components.country_code.toUpperCase()).getWeatherData().then(t=>{e.renderWeather(t.data,i.value.toLowerCase())}).catch(t=>console.log("wheatherData",t));(new s).renderMap(t.results[0].geometry.lng,t.results[0].geometry.lat)}).catch(t=>console.log("cityinfo",t))});const l=document.querySelector(".talkBtn"),u=document.querySelector(".search-input"),h=new(window.SpeechRecognition||window.webkitSpeechRecognition);h.onstart=()=>{console.log("voice recognition")},h.onresult=t=>{const e=t.resultIndex,{transcript:o}=t.results[e][0];d(o)};const d=t=>{u.value=t};l.addEventListener("click",()=>{h.start()});const y=new class{constructor(){this.key="nnLTXJWiodrXTvdOkwthYQ2aTwqnRTY-iKh1oGOJKaY",this.url="https://api.unsplash.com/photos/random?query=morning&client_id="}async getLinkToImage(){const t=await fetch(`${this.url}${this.key}`);return(await t.json()).urls.regular}},m=document.querySelector("body"),g=document.querySelector(".refresh-button");y.getLinkToImage().then(t=>{m.style.backgroundImage=`linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.3) ), url('${t}')`}).catch(t=>console.log(t)),g.addEventListener("click",()=>{y.getLinkToImage().then(t=>{m.style.backgroundImage=`linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.3) ), url('${t}')`}).catch(t=>console.log(t))});const p=document.querySelector("#searchInput");document.querySelector("form").addEventListener("submit",(function(t){t.preventDefault();(new r).getCityInfo(p.value,i.value.toLowerCase()).then(t=>{const e=new c;e.renderCityData(t.results[0],i.value.toLowerCase());new a(p.value,i.value.toLowerCase(),t.results[0].components.country_code.toUpperCase()).getWeatherData().then(t=>{e.renderWeather(t.data,i.value.toLowerCase())}).catch(t=>console.log("wheatherData",t));(new s).renderMap(t.results[0].geometry.lng,t.results[0].geometry.lat)}).catch(t=>console.log("cityinfo",t))})),function(){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],o=["Нядзеля","Понядзелак","Аўторак","Серада","Чацьверг","Пятніца","Субота"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],a=["Студзень","Люты","Сакавiк","Красавiк","Май","Червень","Лiпень","Жнiвень","Верасень","Кастрычнiк","Лiстапад","Снежань"];Date.prototype.getMonthName=function(){return"BE"===i.value?a[this.getMonth()]:"RU"===i.value?r[this.getMonth()]:n[this.getMonth()]},Date.prototype.getDayName=function(){return"BE"===i.value?o[this.getDay()]:"RU"===i.value?e[this.getDay()]:t[this.getDay()]}}();const w=document.querySelector(".temp__farenheitBtn"),f=document.querySelector(".temp__celsBtn"),C=document.querySelector(".weather-today_temperature"),S=document.querySelectorAll(".forecast-temp");function v(t){return Math.floor(9*+t.slice(0,-1)/5+32)+"°"}function b(){f.classList.contains("temp-button_clicked")?(f.classList.remove("temp-button_clicked"),w.classList.add("temp-button_clicked"),[...S].forEach(t=>{t.textContent=v(t.textContent)}),C.textContent=v(C.textContent)):(w.classList.remove("temp-button_clicked"),f.classList.add("temp-button_clicked"),[...S].forEach((t,e)=>{t.textContent=localStorage.getItem("day"+e)+"°"}),C.textContent=localStorage.getItem("today")+"°")}w.addEventListener("click",b),f.addEventListener("click",b)}]);